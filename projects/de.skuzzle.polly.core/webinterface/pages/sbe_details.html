#set ($dir = !$dir)

<h2>Revorix Scoreboard Paster</h2>

<h3>History of $venad</h3>
<table style="width:auto;">
    <tr>
        <th>Zeitraum:</th>
        <td>$myPolly.formatting().formatTimeSpanMs($span)</td>
    </tr>
    <tr>
        <th>Punkte pro Tag:</th>
        <td>$nformat.format($pointsPerDay) ($days Tage)</td>
    </tr>
</table>

<h3>Diagram</h3>
<form action="sbe_details?venad=$venad" method="POST">
    <input type="hidden" name="action" value="setMM"/>
    <label for="selectMonths">Select number of months to display:</label>
    <select id="selectMonths" name="maxMonths" size="1">
        <option value="4">4</option>
        <option value="6">6</option>
        <option value="8">8</option>
        <option value="10">10</option>
        <option value="12">12</option>
        <option value="14">14</option>
        <option value="16">16</option>
        <option value="18">18</option>
        <option value="20">20</option>
        <option value="22">22</option>
        <option value="24">24</option>
    </select>
    
    <input type="submit" class="button" value="Set"/>
</form>
<img id="graph" src="/memory:${venad}_graph" usemap="#pointmap"/>
<map name="pointmap">
    #foreach($np in $allPoints)
        #set ($x1 = $np.getIntX() - 2)
        #set ($x2 = $np.getIntX() + 2)
        #set ($y1 = $np.getIntY() - 2)
        #set ($y2 = $np.getIntY() + 2)
        <area shape="rect" coords="$x1,$y1,$x2,$y2" alt="$np.getName()" 
            title="$np.getName()" href="/">
    #end
</map>

#if ($sortKey && $entries)
    $sorter.sort($entries, $sortKey, $dir)
#end

<table>
    <tr>
        <th><a href="sbe_details?venad=$venad&sortKey=getRank&dir=$dir">Rank</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getVenadName&dir=$dir">Venad</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getClan&dir=$dir">Clan</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getPoints&dir=$dir">Points</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getDiffToPrevious&dir=$dir">Points to prev.</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getDaysToPrevious&dir=$dir">Days to prev.</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getDiscDerivative&dir=$dir">Derivative</a></th>
        <th><a href="sbe_details?venad=$venad&sortKey=getDate&dir=$dir">Date</a></th>
        <th>Action</th>
    </tr>
    #foreach($entry in $entries)
    <tr>
        <td>$entry.getRank()</td>
        <td>$entry.getVenadName()</td>
        <td>$entry.getClan()</td>
        <td>$entry.getPoints()</td>
        <td>$entry.getDiffToPrevious()</td>
        <td>$entry.getDaysToPrevious()</td>
        <td>$nformat.format($entry.getDiscDerivative())</td>
        <td>$myPolly.formatting().formatDate($entry.getDate())</td>
        <td><a href="/Scoreboard?action=delete&id=$entry.getId()">Delete</a></td>
    </tr>
    #end
</table>

