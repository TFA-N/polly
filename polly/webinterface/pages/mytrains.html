<h2>Capi Training Overview</h2>

<h3>Unpaid Trainings</h3>
<table>
    <tr>
        <th>Trainer</th>
        <th>Type</th>
        <th>Factor</th>
        <th>Costs</th>
        <th>Weighted Costs</th>
        <th>Started</th>
        <th>Finished</th>
        <th>Duration</th>
    </tr>
    #foreach ($train in $allOpen.getTrains())
    <tr>
        <td>$trainManager.getTrainer($train.getTrainerId()).getName()</td>
        <td>$train.getType()</td>
        <td>$train.getFactor()</td>
        <td>$train.getCosts()</td>
        #set ( $weighted = $train.getFactor()*$train.getCosts() )
        <td>$weighted</td>
        <td>$myPolly.formatting().formatDate($train.getTrainStart())</td>
        <td>$myPolly.formatting().formatDate($train.getTrainFinished())</td>
        #set ( $diff = $train.getTrainFinished().getTime() - $train.getTrainStart().getTime() )
        <td>$myPolly.formatting().formatTimeSpan($diff)</td>
    </tr>
    #end
    <tr>
        <th></th>
        <th></th>
        <th>Sum</th>
        <th>$allOpen.sum()</th>
        <th>$allOpen.weightedSum()</th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
</table>
    
<h3>Paid Trainings</h3>
<table>
    <tr>
        <th>Trainer</th>
        <th>Type</th>
        <th>Factor</th>
        <th>Costs</th>
        <th>Weighted Costs</th>
        <th>Started</th>
        <th>Finished</th>
        <th>Duration</th>
    </tr>
    #foreach ($train in $allClosed.getTrains())
    <tr>
        <td>$trainManager.getTrainer($train.getTrainerId()).getName()</td>
        <td>$train.getType()</td>
        <td>$train.getFactor()</td>
        <td>$train.getCosts()</td>
        #set ( $weighted = $train.getFactor()*$train.getCosts() )
        <td>$weighted</td>
        <td>$myPolly.formatting().formatDate($train.getTrainStart())</td>
        <td>$myPolly.formatting().formatDate($train.getTrainFinished())</td>
        #set ( $diff = $train.getTrainFinished().getTime() - $train.getTrainStart().getTime() )
        <td>$myPolly.formatting().formatTimeSpan($diff)</td>
    </tr>
    #end
    <tr>
        <th></th>
        <th></th>
        <th>Sum</th>
        <th>$allClosed.sum()</th>
        <th>$allClosed.weightedSum()</th>
        <th></th>
        <th></th>
        <th></th>
    </tr>
</table>